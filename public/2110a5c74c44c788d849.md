---
title: Nginxでリバースプロキシを構築する方法
tags:
  - nginx
  - Ubuntu
private: false
updated_at: '2024-12-02T07:04:28+09:00'
id: 2110a5c74c44c788d849
organization_url_name: null
slide: false
ignorePublish: false
---
## はじめに
リバースプロキシとは、クライアントからのリクエストを受け取り、内部のサーバーに転送する役割を持つサーバーのことです。Nginxは、高速で軽量なWebサーバーであり、リバースプロキシとして非常に人気があります。このガイドでは、Nginxを使用してリバースプロキシを構築する手順を解説します。

## 前提条件
- 基本的なLinuxコマンドの理解
- Nginxの設定ファイルの編集にアクセスできる権限
- Ubuntuであること
## Nginxのインストール
まず、Nginxをインストールします。以下のコマンドを実行してください。
```bash
sudo apt update
sudo apt install nginx
```
## Nginxの設定ファイルを編集する
Nginxの設定ファイルは通常、`/etc/nginx/sites-available/*`にあります。設定ファイルを開いて、リバースプロキシの設定を追加します。
```bash
sudo vi /etc/nginx/sites-available/<好き名前>
```
### 基本的なリバースプロキシ設定
以下のように設定を追加します。この例では、Nginxが受け取ったリクエストを`http://localhost:3000`に転送します。
```
server {
    server_name <自分のドメイン>;

    location / {
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_pass http://localhost:3000;
    }
}
```

### 設定ファイルを保存して終了
設定を終えたら、ファイルを保存してエディタを終了します。
### sites-enabledへのシンボリックリンクを作成
設定が完了したら、`sites-enabled`ディレクトリにシンボリックリンクを作成します。
```
sudo ln -s /etc/nginx/sites-available/<サービス名> /etc/nginx/sites-enabled/
```
## Nginxの設定をテスト
設定ファイルにエラーがないか確認するため、以下のコマンドを実行します。
```bash
sudo nginx -t
```
エラーがなければ、次にNginxを再起動します。

## Nginxを再起動
設定を反映させるために、Nginxを再起動します。
```bash
sudo systemctl restart nginx
```
## 動作確認
ブラウザを開き、設定したドメイン名またはIPアドレスにアクセスして、リバースプロキシが正しく動作しているか確認します。

## まとめ
以上が、Nginxでリバースプロキシを構築する基本的な手順です。Nginxを利用することで、トラフィックの負荷分散やセキュリティの向上など、多くの利点があります。ぜひ、実際に試してみてください。
