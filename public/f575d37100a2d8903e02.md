---
title: è¶…åˆå¿ƒè€…ãŒ Kubernetes ã®å‹‰å¼·ã‚’å§‹ã‚ã¦ã¿ãŸã€ãƒ‡ãƒ—ãƒ­ã‚¤ç·¨ã€‘
tags:
  - kubernetes
private: false
updated_at: '2025-12-15T07:12:26+09:00'
id: f575d37100a2d8903e02
organization_url_name: null
slide: false
ignorePublish: false
---
## ã¯ã˜ã‚ã«

ã€ŒKubernetes æ°—ã«ãªã‚‹ã‘ã©é›£ã—ãã†ã€

æ­£ç›´ã€ç§ã‚‚æœ€åˆã«å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ãŸã¨ãã¯ç”¨èªã‚‚å¤šãã¦ã‚ˆãåˆ†ã‹ã‚‰ãšã€ã‹ãªã‚Šèº«æ§‹ãˆã¦ã„ã¾ã—ãŸã€‚

ä»Šå›ã¯ãã‚“ãª **è¶…åˆå¿ƒè€…ã®è‡ªåˆ†ãŒã€kind ã‚’ä½¿ã£ã¦ Kubernetes ä¸Šã§å®Ÿéš›ã« ã‚¨ãƒ³ã‚¸ãƒ³ã‚¨ãƒƒã‚¯ã‚¹ã® ã‚µã‚¤ãƒˆã‚’èµ·å‹•ã™ã‚‹ã¨ã“ã‚ã¾ã§ã‚„ã£ã¦ã¿ãŸ** ã®ã§ã€ãã®æ‰‹é †ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚


## ä»Šå›ã®ã‚´ãƒ¼ãƒ«

* ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ Kubernetes ã‚’èµ·å‹•ã™ã‚‹
* nginx ã‚’ä½¿ã£ã¦ Web ã‚µã‚¤ãƒˆã‚’ç«‹ã¡ä¸Šã’ã‚‹
* ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆã¾ãŸã¯ curlï¼‰ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹çŠ¶æ…‹ã«ã™ã‚‹

## ãªãœ kind ã‚’é¸ã‚“ã ã®ã‹

å­¦ç¿’ç”¨é€”ã§ä½¿ã† Kubernetes ç’°å¢ƒã¨ã—ã¦ã¯ã€minikube ã¨ kind ãŒæœ‰åã§ã™ã€‚

ä»Šå›ã¯æ¬¡ã®ç†ç”±ã‹ã‚‰ **kind** ã‚’é¸ã³ã¾ã—ãŸã€‚

* Docker ãŒã‚ã‚Œã°ã™ãä½¿ãˆã‚‹
* ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ä½œæˆãŒé«˜é€Ÿ
* å¤±æ•—ã—ã¦ã‚‚ä½œã‚Šç›´ã—ãŒæ¥½

ã¨ã«ã‹ãã€Œã¾ãšè§¦ã£ã¦å‹•ã‹ã™ã€ã«ã¯æœ€é©ã ã¨æ„Ÿã˜ã¾ã—ãŸã€‚

## äº‹å‰æº–å‚™

* Docker Desktop ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨
* kubectl ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨
* kind ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨

ç¢ºèªã‚³ãƒãƒ³ãƒ‰ï¼š

```sh
kind -version
docker ps
kubectl version --client
```

## nginx ã‚’ä½¿ã£ã¦ã‚µã‚¤ãƒˆã‚’èµ·å‹•ã™ã‚‹

### site.yaml ã‚’ä½œæˆ

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: mysite
spec:
  replicas: 1
  selector:
    matchLabels:
      app: mysite
  template:
    metadata:
      labels:
        app: mysite
    spec:
      containers:
        - name: web
          image: nginx
          ports:
            - containerPort: 80
---
apiVersion: v1
kind: Service
metadata:
  name: mysite
spec:
  type: NodePort
  selector:
    app: mysite
  ports:
    - port: 80
      targetPort: 80
      nodePort: 30080
```
### ãƒ‡ãƒ—ãƒ­ã‚¤

```sh
kubectl apply -f site.yaml
```

çŠ¶æ…‹ç¢ºèªï¼š

```sh
kubectl get pods
kubectl get svc
```

Pod ãŒ `Running` ã«ãªã‚Œã° OK ã§ã™ã€‚

## å•é¡Œç‚¹1ï¼šNodePort ã«ã¤ãªãŒã‚‰ãªã„

`localhost:30080` ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚‚ç¹‹ãŒã‚‰ãšã€æœ€åˆã¯ã‹ãªã‚Šæ··ä¹±ã—ã¾ã—ãŸã€‚

èª¿ã¹ã¦ã¿ã‚‹ã¨ã€**kind ã§ã¯ NodePort ãŒãã®ã¾ã¾ localhost ã«å‡ºãªã„ã“ã¨ãŒã‚ã‚‹** ã‚ˆã†ã§ã™ã€‚

## è§£æ±ºç­–ï¼šport-forward ã‚’ä½¿ã†

ç¢ºå®Ÿã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹æ–¹æ³•ã¨ã—ã¦ã€`kubectl port-forward` ã‚’ä½¿ã„ã¾ã—ãŸã€‚

```sh
kubectl port-forward svc/mysite 8080:80 --address 0.0.0.0
```

åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã€

```sh
curl http://localhost:8080
```
nginx ã® Welcome ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã€ç„¡äº‹ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã—ãŸ 

## å®Œæˆ
CongratulationsğŸ‰

## æœ€å¾Œã«

æœ€åˆã¯ã€Œé›£ã—ãã†ã€ã¨æ€ã£ã¦ã„ãŸ Kubernetes ã§ã™ãŒã€
**å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹ã¨ç†è§£ãŒä¸€æ°—ã«é€²ã‚€** ã¨æ„Ÿã˜ã¾ã—ãŸã€‚

æ¬¡å›ã¯ã€è‡ªåˆ†ã® Next.js ã‚¢ãƒ—ãƒªã‚’è¼‰ã›ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚
